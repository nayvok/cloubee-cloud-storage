generator client {
    provider = "prisma-client-js"
    output   = "./generated"
}

datasource db {
    provider = "postgresql"
    url      = env("POSTGRES_URI")
}

model User {
    id           String   @id @default(uuid())
    name         String
    email        String   @unique
    password     String
    avatarPath   String?  @map("avatar_path")
    role         Role     @default(USER)
    storageQuota BigInt   @default(0) @map("storage_quota")
    usedQuota    BigInt   @default(0) @map("used_quota")
    createdAt    DateTime @default(now()) @map("created_at")
    updatedAt    DateTime @updatedAt @map("updated_at")
    files        File[]

    @@map("users")
}

model Invite {
    id           String   @id @default(uuid())
    email        String   @unique
    token        String   @unique
    role         Role     @default(USER)
    storageQuota BigInt   @default(0) @map("storage_quota")
    createdAt    DateTime @default(now()) @map("created_at")

    @@map("invites")
}

model File {
    id              String   @id @default(uuid())
    userId          String   @map("user_id")
    user            User     @relation(fields: [userId], references: [id])
    name            String
    mimeType        String?  @map("mime_type")
    size            BigInt
    path            String
    thumbnailLarge  String?  @map("thumbnail_large")
    thumbnailMedium String?  @map("thumbnail_medium")
    thumbnailSmall  String?  @map("thumbnail_small")
    directoryId     String?  @map("directory_id")
    isDirectory     Boolean  @default(false) @map("is_directory")
    isDeleted       Boolean  @default(false) @map("is_deleted")
    createdAt       DateTime @default(now()) @map("created_at")
    updatedAt       DateTime @updatedAt @map("updated_at")

    @@map("files")
}

enum Role {
    USER
    ADMIN
}
